<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fuel Margin Calculator</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Fuel Margin Calculator</h1>
            <p>Price Conversion Tool</p>
        </header>

        <div class="controls-section">
            <div class="presets-controls">
                <div class="input-group">
                    <label for="presetSelect">Presets:</label>
                    <div class="preset-select-wrapper">
                        <select id="presetSelect">
                            <option value="">-- Select a Preset --</option>
                        </select>
                        <button id="loadPreset" class="btn-primary">Load</button>
                        <button id="updatePreset" class="btn-secondary">Update</button>
                        <button id="deletePreset" class="btn-danger">Delete</button>
                    </div>
                </div>
                <div class="input-group">
                    <label for="presetName">Save New Preset:</label>
                    <div class="preset-save-wrapper">
                        <input type="text" id="presetName" placeholder="Enter preset name">
                        <button id="savePreset" class="btn-primary">Save</button>
                    </div>
                </div>
            </div>

            <div class="input-group">
                <label for="exchangeRate">Exchange Rate (MXN per USD):</label>
                <div class="exchange-rate-input">
                    <input type="number" id="exchangeRate" step="0.0001" placeholder="Enter exchange rate">
                    <button id="fetchExchangeRate" class="btn-secondary">Fetch Current Rate</button>
                </div>
                <small id="exchangeRateInfo" class="info-text"></small>
            </div>

            <div class="input-row">
                <div class="input-group">
                    <label for="basePrice">Base Price (USD/Gal):</label>
                    <input type="number" id="basePrice" step="0.0001" placeholder="0.0000">
                </div>
                <div class="input-group">
                    <label for="gallons">Gallons:</label>
                    <input type="number" id="gallons" step="0.01" placeholder="0.00">
                </div>
                <div class="input-group">
                    <label for="liters">Liters:</label>
                    <input type="number" id="liters" step="0.01" placeholder="0.00">
                </div>
            </div>
        </div>

        <div class="table-section">
            <div class="table-header">
                <h2>Cost Breakdown</h2>
                <div class="table-controls">
                    <button id="shareWhatsApp" class="btn-success">ðŸ“± Share to WhatsApp</button>
                    <button id="toggleDecimals" class="btn-secondary">Switch to 2 Decimals</button>
                    <button id="addConcept" class="btn-primary">+ Add Cost Concept</button>
                </div>
            </div>

            <div class="table-wrapper">
                <table id="calculatorTable">
                    <thead>
                        <tr>
                            <th>Concept</th>
                            <th>MXN/Ltr</th>
                            <th>MXN</th>
                            <th>USD</th>
                            <th>USD/Gal</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="tableBody">
                        <!-- Rows will be added dynamically -->
                    </tbody>
                    <tfoot id="tableFooter">
                        <tr class="total-row">
                            <td><strong>TOTAL COST</strong></td>
                            <td id="totalMxnLtr">0.0000</td>
                            <td id="totalMxn">0.00</td>
                            <td id="totalUsd">0.00</td>
                            <td id="totalUsdGal">0.0000</td>
                            <td></td>
                        </tr>
                        <tr class="margin-row">
                            <td><strong>MARGIN</strong></td>
                            <td id="marginMxnLtr">0.0000</td>
                            <td id="marginMxn">0.00</td>
                            <td id="marginUsd">0.00</td>
                            <td id="marginUsdGal">0.0000</td>
                            <td></td>
                        </tr>
                        <tr class="sale-price-row">
                            <td><strong>SALE PRICE</strong></td>
                            <td id="salePriceMxnLtr">0.0000</td>
                            <td id="salePriceMxn">0.00</td>
                            <td id="salePriceUsd">0.00</td>
                            <td id="salePriceUsdGal">0.0000</td>
                            <td></td>
                        </tr>
                    </tfoot>
                </table>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="script.js"></script>
</body>
</html>
